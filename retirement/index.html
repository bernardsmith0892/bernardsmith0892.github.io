<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js" integrity="sha256-bC3LCZCwKeehY6T4fFi9VfOU0gztUa+S4cnkIhVPZ5E=" crossorigin="anonymous"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VRF3N71N88"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-VRF3N71N88');
    </script>

    <title>Military Retirement Value Calculator</title>
  </head>
  <body onload="preloadFunction('errorToast', 'errorToastBody');">
    <nav class="navbar navbar-expand navbar-light bg-light mb-3">
        <div class="container-fluid">
            <a class="navbar-brand mb-0 h1" href="?">Military Retirement Value Calculator</a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="modal" data-bs-target="#aboutPageModal" href="#">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- 
            ******************************
            * User Input Accordion Menus *
            ******************************
        -->
        <form class="accordion mb-3" onsubmit="document.getElementById('calcSpinner').style.visibility = 'visible'; setTimeout(function(){ calculateRetirementPlan(); document.getElementById('calcSpinner').style.visibility = 'hidden';}, 20); return false;">
            <!-- Personal Data: Information about the User -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="datesMenu">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#datesMejnu-collapse" aria-expanded="true" aria-controls="datesMenu-collapse">
                        <b>Personal Data</b>
                    </button>
                </h2>
                <div id="datesMenu-collapse" class="accordion-collapse collapse show" aria-labelledby="datesMenu">
                    <div class="container mt-3">
                        <div class="row mb-3">
                            <!-- Basic Active Service Date -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The date you entered active duty.">Active Service Date
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="month" class="form-control" id="eadDate" min="1901-01" max="2100-12" required>
                                </div>
                            </div>
                            <!-- Pay Entry Base Date -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The date that DFAS uses to determine your years of service for pay. (Usually the same as your Active Service Date)">Pay Entry Base Date 
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="month" class="form-control" id="payDate" min="1901-01" max="2100-12" required>
                                </div>
                            </div>

                            <!-- Planned Total Active-Duty Service -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="How many years would you serve on active-duty before retiring?">Planned Years of Svc
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="milRetireYOS" value="20" min="0" max="50" required>
                                    <span class="input-group-text">years</span> 
                                </div>
                            </div>

                            <!-- Retirement System -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The retirement system you're enrolled in.">Retirement System
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <select class="form-select" id="retireSystem">
                                        <option value=0.02>BRS (2%)</option>
                                        <option value=0.025>Legacy (2.5%)</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Birthday -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <span class="input-group-text bg-outline-primary text-primary">Birthday</span> 
                                    <input type="month" class="form-control" id="birthday" min="1901-01" max="2100-12" required>
                                </div>
                            </div>
                            <!-- Life Expectancy -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <span class="input-group-text bg-outline-primary text-primary">Life Expectancy</span> 
                                    <input type="number" class="form-control" id="lifeExpectancy" value="85" min="0" max="200" required>
                                    <span class="input-group-text">years</span> 
                                </div>
                            </div>

                            <!-- Change Promotion Timeline -->
                            <div class="col-md-6">
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="careerPathButton">Career Path: Officer</button>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#" onclick="setDefaultTimeline('E')">Enlisted</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="setDefaultTimeline('W')">Tech Warrant</a></li>
                                        <li><a class="dropdown-item" href="#" onclick="setDefaultTimeline('O')">Officer</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#timelineModal" onclick="showPromotionTimeline()">Adjust Promotion Timeline</a></li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Zip Code -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The place you want to calculate BAH for. Leave blank to use the average BAH.">ZIP Code
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="text" class="form-control" id="zipCode" maxlength="5" pattern="[0-9]*">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alternative Plans: Results from getting out or transferring to the reserves -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="alternativesMenu">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#alternativesMenu-collapse" aria-expanded="true" aria-controls="alternativesMenu-collapse">
                        <b>Alternative COA Options</b>
                    </button>
                </h2>
                <div id="alternativesMenu-collapse" class="accordion-collapse collapse show" aria-labelledby="alternativesMenu">
                    <div class="container mt-3">
                        <div class="row">
                            <!-- Course of Action Selector -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" data-bs-toggle="tooltip" data-bs-placement="top" title="What COA do you want to make a prediction for?">Course of Action
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <select class="form-select" id="coaSelect" onchange="setETSDateRequirement()" required>
                                        <option selected value="2">Fully Leave Military Service</option>
                                        <option value="1">Transfer to the Reserves</option>
                                        <option value="0">Stay on Active-Duty</option>
                                    </select>
                                </div>
                            </div>

                            <!-- ETS Date -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The date you plan to leave active-duty service.">ETS Date
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="month" class="form-control" id="etsDate" min="1901-01" max="2100-12" required>
                                </div>
                            </div>

                            <!-- Starting Principal -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="How much in retirement savings will you already have when you ETS?">Savings at ETS
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <span class="input-group-text">$</span> 
                                    <input type="number" class="form-control" id="startingPrincipal" value="0" step="0.01" min="0" max="100000000" required>
                                </div>
                            </div>

                            <!-- Delay Retirement By... -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="If you leave active-duty, how many extra years are you willing to work beyond what would have been your active-duty retirement date?">Delay Retirement By
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="civRetireOffset" value="0" step="1" min="0" max="1000" required>
                                    <span class="input-group-text">years</span> 
                                </div>
                            </div>

                            <!-- Reduce Withdrawals By -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="Set your target annuity as a percentage of the active-duty pension. Supports reductions and increases.">% of Active-Duty Pension
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="annuityAdjustment" value="100" step="0.1" min="0" max="1000" required>
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                            <!-- % of Active-Duty Pay after ETS -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="What percentage of your potential active-duty pay do you require for your civilian pay? This is before adding any required savings.">Civilian Pay Ratio
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="payAdjustment" value="100" step="0.1" min="0" max="1000" required>
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Market Performance: Information about the Return Rates and Inflation -->
            <div class="accordion-item">
                <h2 class="accordion-header" id="marketMenu">
                    <button class="accordion-button collapsed" type="button" type="button" data-bs-toggle="collapse" data-bs-target="#marketMenu-collapse" aria-expanded="false" aria-controls="marketMenu-collapse">
                        <b>Market Performance Assumptions</b>
                    </button>
                </h2>
                <div id="marketMenu-collapse" class="accordion-collapse collapse" aria-labelledby="marketMenu">
                    <div class="container mt-3">
                        <div class="row">

                            <!-- COLA Rates -->
                            <div class="col-md-6">
                                <div class="input-group input-group-sm mb-3">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The rate of annual cost-of-living adjustments to your pay, pension, and withdrawals to account for inflation.">COLA Rate
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="colaRate" value="2.75" step="0.01" min="0" max="20">
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                            <!-- Monte Carlo Iterations -->
                            <div class="col-md-6" id="monteCarloTrialsGroup">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="How many trial runs a Monte Carlo simulation performs. More trials make the results more consistent (not more accurate), but also requires more computing time.">Number of Trials
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="monteCarloTrials" value="1000" step="1" min="0" max="100000">
                                    <span class="input-group-text">trials</span> 
                                </div>
                            </div>

                            <!-- Savings Return Mean -->
                            <div class="col-md-6" id="savingsReturnMeanGroup">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The mean return rate for your savings before you retire.">Savings Mean Return Rate
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="savingsReturnMean" value="7" step="0.01" min="0" max="100">
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                            <!-- Savings Return Standard Deviation -->
                            <div class="col-md-6" id="savingsReturnStdevGroup">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The volatility or standard deviation of your savings growth before you retire.">Savings Return Rate Volatility 
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="savingsReturnStdev" value="14" step="0.01" min="0.1" max="500">
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                            <!-- Retirement Return Mean -->
                            <div class="col-md-6" id="retirementReturnMeanGroup">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The mean return rate for your savings during your retirement.">Retirement Mean Return Rate
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="retirementReturnMean" value="5" step="0.01" min="0.1" max="100">
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                            <!-- Retirement Return Standard Deviation -->
                            <div class="col-md-6" id="retirementReturnStdevGroup">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The volatility or standard deviation of your savings growth during your retirement.">Retirement Return Rate Volatility 
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="retirementReturnStdev" value="4" step="0.01" min="0.1" max="500">
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                            <!-- Savings Monte Carlo Score -->
                            <div class="col-md-6" id="minMonteCarloScoreGroup">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The approximate success rate needed for your savings plan. Success is defined as gaining enough funds to meet the required savings goal.">Savings Plan Monte Carlo Score
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="savingsMonteCarloScore" value="50" step="1" min="0" max="100">
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                            <!-- Retirement Monte Carlo Score -->
                            <div class="col-md-6" id="maxMonteCarloScoreGroup">
                                <div class="input-group input-group-sm mb-3 justify-content-center">
                                    <button class="input-group-text bg-outline-primary text-primary" type="button" role="button" data-bs-toggle="tooltip" data-bs-placement="top" title="The approximate success rate needed for your savings after retirement. Success is defined as still being able to withdraw funds until your life expectancy.">Retirement Monte Carlo Score
                                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                                    </button> 
                                    <input type="number" class="form-control" id="retirementMonteCarloScore" value="80" step="1" min="0" max="100">
                                    <span class="input-group-text">%</span> 
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Calculate retirement plan button --> 
            <div class="row mt-3">
                <div class="col mb-3">
                    <button id="calcRetirementButton" class="btn btn-primary me-3" type="submit">Calculate Retirement Plan</button>
                    <span id="calcSpinner" class="spinner-border align-middle" role="status" style="visibility:hidden"></span>
                </div>
                <div class="col mb-3">
                    <a id="bookmarkLink" class="btn btn-outline-primary" href="#" hidden>Save Settings</a>
                </div>
            </div>
        </form>


        <!-- 
            ***************************
            * Retirement Calculations *
            ***************************
        -->
        <div class="container">
            <div class="row">
                <ul class="col-md-6 list-group list-group-horizontal mb-3" hidden id="requiredSavingsGroup">
                    <li class="list-group-item bg-success text-white w-50" data-bs-toggle="tooltip" data-bs-placement="top" title="The savings you would need upon retirement to withdraw the same amount as the active-duty pension. Also accounts for the pension's COLA increase each year."><b>Equivalent Savings</b> 
                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                    </li><li class="list-group-item w-50" id="requiredSavings"></li>
                </ul>

                <ul class="col-md-6 list-group list-group-horizontal mb-3" hidden id="pensionGroup">
                    <li class="list-group-item bg-success text-white w-50" data-bs-toggle="tooltip" data-bs-placement="top" title="The initial value of the active-duty pension upon retirement. (If you're planning for a delayed retirement, the second value shows the pension COLA-adjusted to that date)"><b>Active-Duty Pension</b>
                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                    </li><li class="list-group-item w-50" id="pension"></li>
                </ul>

                <ul class="col-md-6 list-group list-group-horizontal mb-3" hidden id="monthlySavingsGroup">
                    <li class="list-group-item bg-success text-white w-50" data-bs-toggle="tooltip" data-bs-placement="top" title="How much money you need to save each month after your ETS to match the active-duty pension."><b>Monthly Deposits</b> 
                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                    </li><li class="list-group-item w-50" id="monthlySavings"><li>
                </ul>
                
                <ul class="col-md-6 list-group list-group-horizontal mb-3" hidden id="annualSavingsGroup">
                    <li class="list-group-item bg-success text-white w-50" data-bs-toggle="tooltip" data-bs-placement="top" title="How much money you need to save every year after your ETS to match the active-duty pension."><b>Annual Deposits</b> 
                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                    </li><li class="list-group-item w-50" id="annualSavings"></li>
                </ul>

                <ul class="col-md-6 list-group list-group-horizontal mb-3" hidden id="reservesPensionGroup">
                    <li class="list-group-item bg-success text-white w-50" data-bs-toggle="tooltip" data-bs-placement="top" title="The initial value of the reservist pension upon retirement at 60 years old."><b>Reservist Pension</b>
                        &nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16"> <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/> <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></svg>
                    </li><li class="list-group-item w-50" id="reservesPension"></li>
                </ul>
            </div>

            <!--
                ******************************
                * Detailed graphs and tables *
                ******************************
            -->
            <div class="row">
                <ul class="nav nav-tabs" id="myTab" role="tablist" hidden>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="savingsChartTab-tab" data-bs-toggle="tab" data-bs-target="#savingsChartTab" type="button" role="tab" aria-controls="savingsChartTab" aria-selected="true">Savings Plan Chart</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="retireTableTab-tab" data-bs-toggle="tab" data-bs-target="#retireTableTab" type="button" role="tab" aria-controls="retireTableTab" aria-selected="false">Savings Plan Table</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="withdrawalChartTab-tab" data-bs-toggle="tab" data-bs-target="#withdrawalChartTab" type="button" role="tab" aria-controls="withdrawalChartTab" aria-selected="false">Retirement Payout Chart</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="withdrawalTableTab-tab" data-bs-toggle="tab" data-bs-target="#withdrawalTableTab" type="button" role="tab" aria-controls="withdrawalTableTab" aria-selected="false">Retirement Payout Table</button>
                    </li>
                </ul>

                <div class="tab-content" id="myTabContent">
                    <!-- Retirement Plan Chart -->
                    <div class="tab-pane fade show active" id="savingsChartTab" role="tabpanel" aria-labelledby="savingsChartTab-tab" style="min-height: 600px">
                        <canvas id="savingsChart"></canvas>
                    </div>

                    <!-- Retirement Plan Table -->
                    <div class="tab-pane fade" id="retireTableTab" role="tabpanel" aria-labelledby="retireTableTab-tab">
                        <table class="table table-striped" id="retireTable"></table>
                    </div>

                    <!-- Retirement Payouts Chart -->
                    <div class="tab-pane fade" id="withdrawalChartTab" role="tabpanel" aria-labelledby="withdrawalChart-tab" style="min-height: 600px">
                        <canvas id="withdrawalChart"></canvas> 
                    </div>

                    <!-- Retirement Payouts Table -->
                    <div class="tab-pane fade" id="withdrawalTableTab" role="tabpanel" aria-labelledby="withdrawalTableTab-tab">
                        <table class="table table-striped" id="withdrawalTable"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Page Modal -->
    <div class="modal fade" id="aboutPageModal" tabindex="-1" aria-labelledby="aboutPageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="aboutPageModalLabel">About</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
        <h5 id="introduction">Introduction</h5>
<p>I've noticed a lot of issues with how some tools estimate the overall value of the military pension. The most common method I've seen is to simply add up how much you would earn from the pension over your lifetime. (i.e. <code>Life Expectancy (years) x Pension Annuity ($ per year) = Total Pension Value</code>) According to this method, someone who retires as an O-5 at 42 and lives to 85 will have a pension &quot;worth&quot; $5,921,350 under Hi-3. (There's a reason why the official DoD retirement calculator uses this method.) By looking at this, the naive assumption is that you would need to save up almost <em>$6 million</em> by the time you're 42 in order to match the value of the military pension. A near impossible task, even if you never joined the military and started saving from 22 years old!</p>
<p>However, this method is extremely faulty. Of course, it would be completely true if you're planning to put all of your retirement savings under your mattress to earn a 0% return rate. But most people usually put their life savings in retirement accounts that gain value over time. If you consider this, the savings you would need to match the pension's value is greatly reduced. In fact, with a modest 3% return rate, the savings requirement for the previous scenario is cut to &quot;only&quot; $3 million.</p>
<p>This tool was designed to estimate how much in <em>savings</em> you would need to match an active-duty pension, rather than how much money you will earn from the pension. It does this by developing a retirement plan with the following requirements:</p>
<ul>
<li>Your initial withdrawals from savings must match what you would receive from an active-duty pension.</li>
<li>The amount of your withdrawals will increase to match the cost-of-living adjustments (COLA) that the military pension gets.</li>
<li>Your savings must last from your retirement age to your predicted life expectancy.</li>
</ul>
<h5 id="disclaimer">Disclaimer</h5>
<p>I hope this tool can serve as a useful <em>part</em> of your retirement and career planning, however I must stress that these are <em>estimates</em> and I cannot make any guarantees about the accuracy of the results. It makes a lot of bold assumptions about the future of the stock market, cost-of-living, and inflation. While I certainly did not attempt to make the tool <em>inaccurate</em>, it unfortunately cannot predict the future with a measurable accuracy. I cannot guarantee that if the tool tells you save <code>$XYZ</code> every month that you will have <code>$ABC</code> by your retirement year, nor if it tells you to have <code>$ABC</code> in retirement savings that it will last you for the rest of your life. Regardless, I still hope that this does serve useful to you and helps you make a better informed decision about your career and future.</p>
<h5 id="scenarios">Scenarios</h5>
<p>There are three scenarios this tool can consider:</p>
<ol>
<li><strong>If you completely ETS from military service:</strong> This scenario estimates how much you will need to save, starting from your ETS date, in order to match the active-duty pension.</li>
<li><strong>If you ETS and transfer into the reserves:</strong> This scenario is very similar to the previous one. The primary difference is that it also considers the value of your reservist pension at 60 years old to reduce your withdrawal requirements.</li>
<li><strong>If you stay on active-duty until retirement:</strong> This scenario estimates the equivalent value of your potential active-duty pension, how much the government is currently &quot;saving&quot; for you each month, and how much the government has already &quot;saved&quot; for you. You can use this as a retention tool or to compare the values of retirement pensions between different timelines. (For example - Retire at 20 years or retire at 24 years) Also supports calculating early retirements under TERA.</li>
</ol>
<p>If you wish to consider other scenarios, you also have the option to download Excel/CSV versions of the tables to perform additional calculations. The download buttons are at the bottom of the tables.</p>
<h5 id="assumptions">Assumptions</h5>
<p>The calculator makes the following assumptions:</p>
<ul>
<li>Annual military pay raises and cost-of-living adjustments are equal to the inflation rate.</li>
<li>You would have received BAH for wherever you chose to live.</li>
<li>You will save the same amount of money per month.</li>
<li>For reserves retirement, it assumes that you will earn 72 retirement points each year after you ETS from active-duty.</li>
</ul>
<h5 id="outputs">Outputs</h5>
<p>The calculator will provide the following outputs:</p>
<ul>
<li>The estimated value for your potential active-duty pension.</li>
<li>Savings needed to match that pension during retirement.</li>
<li>How much you will need to save per month to match it by your retirement date.</li>
<li><i>(Optional)</i> The estimated value for a reserves pension at 60.</li>
</ul>
</div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
        </div>
    </div>
    </div>

    <!-- Change Promotion Timeline Modal -->
    <div class="modal fade" id="timelineModal" tabindex="-1" aria-labelledby="timelineModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="timelineModalLabel">Change Promotion Timeline</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body d-flex justify-content-center">
            <table class="table table-sm w-auto" id="timelineTable"> </table>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-sm btn-primary" onclick="savePromotionTimeline()">Save changes</button>
        </div>
        </div>
    </div>
    </div> 

    <div class="toast position-absolute ms-2 mt-2 top-0 start-0" id="errorToast">
        <div class="toast-header">
            <strong class="me-auto text-danger">Error</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="errorToastBody">
            There was an error loading your saved settings.
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-kQtW33rZJAHjgefvhyyzcGF3C5TFyBQBA13V1RKPf4uH+bwyzQxZ6CmMZHmNBEfJ" crossorigin="anonymous"></script>

    <!-- Bootstrap: Enable tooltips -->
    <script>
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
        })
    </script>

    <script src="retirement.js"></script>
  </body>
</html>
